#!/usr/bin/env node


///<reference path="../lib/tslib/node.d.ts" />
var path = require('path');

var program = require('commander');
var pkg = require('../package.json');
var copy = require('../lib/copyDir');

var version = pkg.version;

program.version(version).option('-n,--noNodeModules', "do not use local node_modules").parse(process.argv);

var projectPath = program.args.shift() || './test';
projectPath = path.resolve(process.cwd(),projectPath);

function createProject() {
    copy.copyDir(path.join(__dirname,'../template'), path.resolve(projectPath));
    if (!program.noNodeModules) {
        copy.copyDir(path.join(__dirname,'../node_modules'), path.join(projectPath, 'node_modules'));
    }
}

createProject();

process.on('exit', function () {
    console.log();
    console.log('   install dependencies:');
    if(program.noNodeModules){
        console.log('     $ cd %s && npm install', projectPath);
    } else {
        console.log('     $ cd %s', projectPath);
    }
    console.log();
    console.log('   run the app:');
    console.log('     $ node app');
    console.log('     open http://127.0.0.1:3000/example');
    console.log();
});
